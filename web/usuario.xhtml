<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Usuario</title>
    </h:head>

    <!-- *************************************************************** MODAL EDITAR USUARIO -->
    <b:modal id="modalEdicion" title="Edición Persona" closable="true" close-on-escape="true" backdrop="true" size="modal-lg">
        <b:form id="formEdicion">
            <b:container fluid="true" contentDisabled="false" id="containerEdicion">
                <b:row>
                    <b:column span="4" offset="1">
                        <b:inputText label="C.I / RUC:  " value="#{usuariosBean.usuario.jnperRuc}" required="true" requiredMessage="Ingrese el código de nacionalidad/Senecyt" validatorMessage="Ingrese solo números">        
                            <f:validateRegex pattern="[0-9]*" />
                        </b:inputText>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="4" offset="1">
                        <b:inputText label="Nombre" value="#{usuariosBean.usuario.jnperNombres}" required="true" requiredMessage="Ingrese el nombre del pais" />
                    </b:column>
                    <b:column span="4" offset="1">
                        <b:inputText label="Apellido: " value="#{usuariosBean.usuario.jnperApellidos}" >
                        </b:inputText>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="4" offset="1">
                        <b:inputText label="Telefono: " value="#{usuariosBean.usuario.jnperTelefono}"  maxlength="10" >
                            <f:validateRegex pattern="[0-9]*" />
                        </b:inputText>
                    </b:column>
                    <b:column span="4" offset="2">
                        <b:inputText label="Direccióm: " value="#{usuariosBean.usuario.jnperDireccion}" required="true">        
                        </b:inputText>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="4" offset="1">
                        <b:inputText label="Email: " value="#{usuariosBean.usuario.jnperEmail}" >
                        </b:inputText>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="2" offset="1">
                        <b:formGroup>
                            <b:selectOneMenu value="#{usuariosBean.usuario.jnperEstado}" required="true" label="Estado" select2="true">
                                <f:selectItem itemLabel="Activo" itemValue="A" />
                                <f:selectItem itemLabel="Inactivo" itemValue="I" />
                            </b:selectOneMenu>
                        </b:formGroup>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="5" offset="4">
                        <b:commandButton large-screen="full-width" oncomplete="if(!validationFailed) {$('#modalEdicion').modal('hide')}" look="success" ajax="true" update="@form :formLista" action="#{usuariosBean.actulziarUsuario()}" value="Guardar Cambios" />
                    </b:column>
                </b:row>
                <b:row>
                    <b:column>
                        <b:fetchBeanInfos />
                        <b:messages />
                    </b:column>
                </b:row>
            </b:container>
        </b:form>
    </b:modal>




    <h:body>
        <ui:include src="/statics/head.xhtml" />
        <b:form>
            <b:row>
                <b:column>
                    <b:commandButton  value="Home" action="/index.xhtml?faces-redirect=true"/>
                </b:column>
            </b:row>
        </b:form>

        #{usuariosBean.initDatos()}
        <b:form id="fromDatos">
            <b:row>
                <b:column span="6">
                    <h:panelGrid columns="1" cellpadding="5">
                        <b:column>
                            <b:inputText label="RUC:" value="#{usuariosBean.ruc}" labelStyle="width:80px;" validatorMessage="Ingrese solo números"> 
                                <f:validateRegex pattern="[0-9]*" />
                            </b:inputText>
                        </b:column>

                        <b:column>
                            <b:inputText label="Nombre:" value="#{usuariosBean.nombres}" labelStyle="width:80px;"> </b:inputText>
                        </b:column>

                        <b:column>
                            <b:inputText label="Apellido:" value="#{usuariosBean.apellidos}" labelStyle="width:80px;"> </b:inputText>
                        </b:column>

                        <b:column>
                            <b:inputText label="Direccion:" value="#{usuariosBean.direccion}" labelStyle="width:80px;"> </b:inputText>
                        </b:column>

                        <b:column>
                            <b:inputText label="Telefono:" value="#{usuariosBean.telefono}" labelStyle="width:80px;"> 
                                <f:validateRegex pattern="[0-9]*" />
                            </b:inputText>
                        </b:column>

                        <b:column>
                            <b:inputText label="E-mail:" value="#{usuariosBean.email}" labelStyle="width:80px;"> </b:inputText>
                        </b:column>
                    </h:panelGrid>
                </b:column>
                <b:column span="10">
                    <b:formGroup>
                        <b:selectOneMenu value="#{usuariosBean.estado}" colMd="2" required="true" label="Estado" labelColMd="2" select2="true">
                            <f:selectItem itemLabel="(Please select)" itemValue="" />
                            <f:selectItem itemLabel="Activo" itemValue="A" />
                            <f:selectItem itemLabel="Inactivo" itemValue="I" />
                        </b:selectOneMenu>
                    </b:formGroup>

                    <b:formGroup>
                        <b:selectOneMenu value="#{usuariosBean.sexo}" colMd="2" required="true" label="Sexo" labelColMd="2" select2="true">
                            <f:selectItem itemLabel="(Please select)" itemValue="" />
                            <f:selectItem itemLabel="Masculino" itemValue="M" />
                            <f:selectItem itemLabel="Femenino" itemValue="F" />
                        </b:selectOneMenu>
                    </b:formGroup>

                    <b:commandButton action="#{usuariosBean.nuevoUsuario()}" value="Nuevo Usuario" look="warning" >
                    </b:commandButton>
                </b:column>
            </b:row>
            <br></br>
        </b:form>

        <h:form id="formLista">
            <b:dataTable id="tablaDatos1" value="#{usuariosBean.listarusuario()}" var="usu" excel="true" csv="true" pdf="true" columnVisibility="true" copy="true" print="true" row-style-class="#{car.enginePower>100?'light-power':'light'}, #{car.enginePower>100?'dark-power':'dark'} ">
                <b:dataTableColumn value="#{usu.jnperRuc}" label="RUC" style="width: 8%;"/>
                <b:dataTableColumn label="Nombres" value="#{usu.jnperNombres}" style="width: 10%;" order="asc" />
                <b:dataTableColumn label="Apellidos " value="#{usu.jnperApellidos}" style="width: 10%" />
                <b:dataTableColumn label="Dierccion" value="#{usu.jnperDireccion}" style="width: 15%" />
                <b:dataTableColumn label="Telefono" value="#{usu.jnperTelefono}" style="width: 8%" />
                <b:dataTableColumn label="Email" value="#{usu.jnperEmail}" style="width: 10%" />
                <b:dataTableColumn label="Sexo" value="#{usu.jnperSexo}" style="width: 5%" />
                <b:dataTableColumn label="Acciones" style="width: 6%" orderable="false">
                    <b:row>
                        <b:column span="1" offset="1">
                            <b:commandButton ajax="true" update=":modalEdicion:formEdicion" action="#{usuariosBean.cargarPersona(usu)}" oncomplete="$('#modalEdicion').modal('show')" tooltip="Editar" look="warning">
                                <b:iconAwesome name="pencil"></b:iconAwesome>
                            </b:commandButton>
                        </b:column>
                        <b:column span="1" offset="2">
                            <b:commandButton ajax="true" update="@form" action="#{usuariosBean.eliminarUusuario(usu)}" tooltip="Elimnar" look="danger">
                                <b:iconAwesome name="trash"></b:iconAwesome>
                            </b:commandButton>
                        </b:column>
                    </b:row>
                </b:dataTableColumn>
            </b:dataTable>
        </h:form>  
    </h:body>
</html>

